@page
@{
    ViewData["Title"] = "أمر توريد";
}

<style>
    body {
        direction: rtl;
        font-family: "Times New Roman", serif;
        background: #f5fI5F5;
    }

    #content, #content * {
        direction: rtl !important;
        text-align: right !important;
    }

    .print-area {
        width: 210mm;
        min-height: 297mm;
        background: #fff;
        padding: 15mm;
        margin: auto;
        border: 1px solid #000;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
    }

    td, th {
        border: 1px solid #000;
        padding: 6px;
        vertical-align: middle;
    }

    .no-border td {
        border: none;
    }

    .center {
        text-align: center !important;
    }

    .bold {
        font-weight: bold;
    }

    .title {
        font-size: 20px;
        text-decoration: underline;
        margin: 5px 0;
    }

    .section {
        margin-top: 10px;
        font-size: 14px;
        line-height: 1.9;
    }

    .signature td {
        height: 70px;
        text-align: center;
        vertical-align: bottom;
        font-weight: bold;
    }

    @@media print {
        .no-print {
            display: none;
        }
    }
</style>

<div id="app">

    <div class="no-print text-center mb-3">
        <button class="btn btn-danger" v-on:click="handler.downloadPDF">
            تحميل PDF
        </button>
    </div>

    <div id="content" class="print-area">

        <!-- ===== Header ===== -->
        <table class="no-border">
            <tr>
                <td style="width:25%">
                    <img src="/images/logo.png" height="70" />
                </td>
                <td class="center">@* 
                    <div class="bold">جامعة الزقازيق</div> *@
                    <div>الإدارة العامة للمشتريات والمخازن</div>
                    <div class="title">أمر توريد</div>
                </td>
                <td style="width:25%">
                    رقم: {{ state.orderNumber }}<br />
                    التاريخ: {{ state.orderDate }}
                </td>
            </tr>
        </table>

        <!-- ===== السادة / العنوان ===== -->
        <div class="section">
            <div class="bold">
                السادة / {{ state.vendor.name }} المحترمين
            </div>
            <div>
                العنوان : {{ state.vendorAddress }}
            </div>
        </div>

        <!-- ===== نص تمهيدي رسمي ===== -->
        <div class="section">@* 
            إشارة إلى العرض المقدم منكم والمؤيد بالمستندات القانونية والفنية،
            وبعد الفحص والدراسة، فقد تقرر التعاقد معكم على توريد الأصناف الموضحة
            
            بالجدول التالي طبقًا للأسعار والكميات الموضحة: *@
            رجاء سرعة توريد الاصناف التالية وفقاً للعرض المقدم من سيادتكم:
        </div>

        <!-- ===== جدول الأصناف ===== -->
        <table>
            <thead>
                <tr class="center bold">
                    <th>م</th>
                    <th>الصنف</th>
                    <th>الكمية</th>
                    <th>سعر الوحدة</th>
                    <th>الإجمالي</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(item,index) in state.items" :key="index">
                    <td class="center">{{ index + 1 }}</td>
                    <td>{{ item.product.name }}</td>
                    <td class="center">{{ item.quantity }}</td>
                    <td class="center">{{ item.unitPrice }}</td>
                    <td class="center">{{ item.total }}</td>
                </tr>
            </tbody>
        </table>

        <!-- ===== الإجماليات ===== -->
        <table style="width:60%; margin-top:10px;">
            <tr>
                <td>الإجمالي</td>
                <td>{{ state.subTotal }}</td>
            </tr>
            <tr>
                <td>ضريبة القيمة المضافة 14%</td>
                <td>{{ state.tax }}</td>
            </tr>
            <tr class="bold">
                <td>الإجمالي شامل الضريبة</td>
                <td>{{ state.totalAmount }}</td>
            </tr>
        </table>

        <div class="section bold">
            ووفقًا للعرض المقدم منكم والمقبول فنيًا بإجمالي مبلغ
            ({{ totalAmountInWords }} جنيه مصري فقط لا غير)
            والأسعار شاملة ضريبة القيمة المضافة
        </div>


        <!-- ===== الشروط (ثابتة مثل الصورة) ===== -->
        <div class="section">
            <span class="bold">وذلك بالشروط التالية:</span>
            <ol>
                <li>التوريد خلال أسبوع من تاريخ استلام أمر التوريد.</li>
                <li>الأسعار شاملة جميع الضرائب.</li>
                <li>السداد بعد الفحص والاستلام.</li>
                <li>الدفع إلكتروني لحساب / الخزينة الموحدة.</li>
                <li>الاستلام بمخازن الجامعة.</li>
                <li>خصم 0.5% تأمين نهائي.</li>
            </ol>
        </div>

        <!-- ===== التوقيعات ===== -->
        <table class="signature">
            <tr>
                <td>توقيع المورد</td>
                <td>يعتمد</td>
            </tr>
            <tr>
                <td></td>
                <td>أمين عام الجامعة</td>
            </tr>
        </table>

    </div>
</div>



@section scripts {
    <script src="~/FrontEnd/Pages/PurchaseOrders/PurchaseOrderPdf.cshtml.js"></script>
}

